{
    "openapi" : "3.0.0",
    "info" : {
        "title" : "API de gerenciamento de uma loja de carros",
        "description" : "Essa API tem como objetivo o gerenciamento de uma loja de carros, com manipulação de usuários e produtos",
        "contact" : {
            "email" : "leonardo.pin.s2002@gmail.com"
        },
        "version" : "1.0.0"
    },
    "servers" : [
        {
            "url" : "http://localhost:8081",
            "description" : "API de testes"
        }
    ],
    "paths" : {
        "/carros" : {
            "get" : {
                "sumary" : "Visualizar carros",
                "description" : "Rota pública responsável por mostrar os carros cadastrados no sistema",
                "tags" : ["Carros"],
                "responses": {
                    "200" : {
                        "description" : "OK",
                        "content" : {
                            "application/json" : {
                                "schema" : {
                                    "type" : "array",
                                    "items" : {
                                        "$ref" : "#/components/schemas/Carro"
                                    }
                                }
                            }
                        }
                    },
                    "204" : {
                        "description" : "No Content"
                    },
                    "500" : {
                        "description" : "Internal Error"
                    }
                }
            }
        },

        "/carros/{chassis}" : {
            "get" : {
                "sumary" : "Visualizar carro específico",
                "description" : "Rota pública responsável por mostrar as informações de um carro especificado nas params",
                "tags" : ["Carros"],
                "parameters" : [
                    {
                        "name" : "chassis",
                        "in" : "path",
                        "description" : "Chassi do carro para buscá-lo no sistema",
                        "required" : true
                    }
                ],
                "responses" : {
                    "200" : {
                        "description" : "OK",
                        "content" : {
                            "application/json" : {
                                "schema" : {
                                    "type" : "object",
                                    "$ref" : "#/components/schemas/Carro"
                                }
                            }
                        }
                    },
                    "204" : {
                        "description" : "No Content"
                    },
                    "500" : {
                        "description" : "Internal Error"
                    },
                    "400" : {
                        "description" : "Bad Request"
                    }
                }
            }
        },

        "/usuario/carros" : {
            "get" : {
                "sumary" : "Visualizar carros",
                "description" : "Rota responsável por mostrar os carros cadastrados no sistema, com dados internos",
                "tags" : ["Carros"],
                "security" : [{"bearerAuth" : []}],
                "responses": {
                    "200" : {
                        "description" : "OK",
                        "content" : {
                            "application/json" : {
                                "schema" : {
                                    "type" : "array",
                                    "items" : {
                                        "$ref" : "#/components/schemas/Carro"
                                    }
                                }
                            }
                        }
                    },
                    "204" : {
                        "description" : "No Content"
                    },
                    "401" : {
                        "description" : "Unauthorized"
                    },
                    "500" : {
                        "description" : "Internal Error"
                    }
                }
            }
        },

        "/usuario/carros/{chassis}" : {
            "get" : {
                "sumary" : "Visualizar carro específico",
                "description" : "Rota responsável por mostrar as informações de um carro especificado nas params",
                "tags" : ["Carros"],
                "security" : [{"bearerAuth" : []}],
                "parameters" : [
                    {
                        "name" : "chassis",
                        "in" : "path",
                        "description" : "Chassi do carro para buscá-lo no sistema",
                        "required" : true
                    }
                ],
                "responses" : {
                    "200" : {
                        "description" : "OK",
                        "content" : {
                            "application/json" : {
                                "schema" : {
                                    "type" : "object",
                                    "$ref" : "#/components/schemas/Carro"
                                }
                            }
                        }
                    },
                    "500" : {
                        "description" : "Internal Error"
                    },
                    "400" : {
                        "description" : "Bad Request"
                    },
                    "401" : {
                        "description" : "Unauthorized"
                    }
                }
            }
        },

        "/usuario/editar" : {
            "put" : {
                "sumary" : "Editar usuário",
                "description" : "Rota na qual o usuário logado pode modificar alguns dados da sua conta",
                "tags" : ["Usuario"],
                "security" : [{"bearerAuth" : []}],
                "requestBody" : {
                    "content" : {
                        "application/json" : {
                            "schema" : {
                                "$ref" : "#/components/schemas/Usuario"
                            },
                            "examples" : {
                                "usuario" : {
                                    "value" : {
                                        "name" : "Joao Editado",
                                        "biography" : "Olá! tenho 22 anos e sou dev backend"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses" : {
                    "401" : {
                       "description" : "Unauthorized"
                    },
                    "400" : {
                        "description" : "Bad Request"
                     },
                     "500" : {
                        "description" : "Internal Error"
                     },
                     "200" : {
                        "description" : "OK",
                        "content" : {
                            "application/json" : {
                                "schema" : {
                                    "type" : "object",
                                    "$ref" : "#/components/schemas/Usuario"
                                }
                            }
                        }
                     }
                } 
            }
        },

        "/usuario/minha-conta" : {
            "get" : {
                "sumary" : "Visualizar usuário",
                "description" : "Rota na qual o usuário logado pode acessar os dados da sua conta",
                "tags" : ["Usuario"],
                "security" : [{"bearerAuth" : []}],
                "responses" : {
                    "401" : {
                       "description" : "Unauthorized"
                    },
                    "400" : {
                        "description" : "Bad Request"
                     },
                     "500" : {
                        "description" : "Internal Error"
                     },
                     "200" : {
                        "description" : "OK",
                        "content" : {
                            "application/json" : {
                                "schema" : {
                                    "type" : "object",
                                    "$ref" : "#/components/schemas/Usuario"
                                }
                            }
                        }
                     }
                } 
            }
        },
        
        "/usuario/minhas-vendas" : {
            "get" : {
                "sumary" : "Visualizar vendas do usuário",
                "description" : "Rota na qual o usuário logado pode acessar os registros de suas vendas",
                "tags" : ["Usuario"],
                "security" : [{"bearerAuth" : []}],
                "responses" : {
                    "401" : {
                       "description" : "Unauthorized"
                    },
                    "400" : {
                        "description" : "Bad Request"
                     },
                     "500" : {
                        "description" : "Internal Error"
                     },
                     "200" : {
                        "description" : "OK",
                        "content" : {
                            "application/json" : {
                                "schema" : {
                                    "type" : "object",
                                    "$ref" : "#/components/schemas/Usuario"
                                }
                            }
                        }
                     }
                } 
            }
        },

        "/usuario/vender/{chassis}" : {
            "post" : {
                "sumary" : "Realizar uma venda",
                "description" : "Rota na qual o usuário pode registrar uma venda",
                "tags" : ["Usuario"],
                "security" : [{"bearerAuth" : []}],
                "parameters" : [
                    {
                        "name" : "chassis",
                        "in" : "path",
                        "description" : "Chassi do carro para buscá-lo no sistema",
                        "required" : true
                    }
                ],
                "requestBody" : {
                    "content" : {
                        "application/json" : {
                            "schema" : {
                                "$ref" : "#/components/schemas/Venda"
                            },
                            "examples" : {
                                "usuario" : {
                                    "value" : {
                                        "sold" : false,
                                        "reserved" : true,
                                        "sell_price" : "",
                                        "client_cpf" : "98765431011"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses" : {
                    "401" : {
                       "description" : "Unauthorized"
                    },
                    "400" : {
                        "description" : "Bad Request"
                     },
                     "500" : {
                        "description" : "Internal Error"
                     },
                     "200" : {
                        "description" : "OK",
                        "content" : {
                            "application/json" : {
                                "schema" : {
                                    "type" : "object",
                                    "$ref" : "#/components/schemas/Usuario"
                                }
                            }
                        }
                     }
                } 
            },

            "put" : {
                "sumary" : "Realizar uma venda em um carro reservado",
                "description" : "Rota na qual o usuário pode registrar uma venda através de uma reserva feita anteriormente",
                "tags" : ["Usuario"],
                "security" : [{"bearerAuth" : []}],
                "parameters" : [
                    {
                        "name" : "chassis",
                        "in" : "path",
                        "description" : "Chassi do carro para buscá-lo no sistema",
                        "required" : true
                    }
                ],
                "requestBody" : {
                    "content" : {
                        "application/json" : {
                            "schema" : {
                                "$ref" : "#/components/schemas/Venda"
                            },
                            "examples" : {
                                "usuario" : {
                                    "value" : {
                                        "sold" : true,
                                        "sell_price" : "60000"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses" : {
                    "401" : {
                       "description" : "Unauthorized"
                    },
                    "400" : {
                        "description" : "Bad Request"
                     },
                     "500" : {
                        "description" : "Internal Error"
                     },
                     "200" : {
                        "description" : "OK",
                        "content" : {
                            "application/json" : {
                                "schema" : {
                                    "type" : "object",
                                    "$ref" : "#/components/schemas/Usuario"
                                }
                            }
                        }
                     }
                } 
            }
        },

        "/admin/cadastrar" : {
            "post" : {
                "sumary" : "Cadastrar novos usuários",
                "description" : "Rota na qual o usuário administrador pode cadastrar novos usuários no sistema. Obs: o cpf e o email devem ser únicos",
                "tags" : ["Admin"],
                "security" : [{"bearerAuth" : []}],
                "requestBody" : {
                    "content" : {
                        "application/json" : {
                            "schema" : {
                                "$ref" : "#/components/schemas/Usuario"
                            },
                            "examples" : {
                                "usuario" : {
                                    "value" : {
                                        "name" : "Joao",
                                        "cpf" : "78945612301",
                                        "email" : "joao@email.example.com",
                                        "biography" : "Olá! tenho 22 anos e sou dev",
                                        "password" : "123"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses" : {
                    "401" : {
                       "description" : "Unauthorized"
                    },
                    "400" : {
                        "description" : "Bad Request"
                     },
                     "500" : {
                        "description" : "Internal Error"
                     },
                     "200" : {
                        "description" : "OK",
                        "content" : {
                            "application/json" : {
                                "schema" : {
                                    "type" : "object",
                                    "$ref" : "#/components/schemas/Usuario"
                                }
                            }
                        }
                     }
                } 
            }
        }
    },

    "components" : {
        "schemas" : {
            "Usuario" : {
                "type" : "object",
                "properties" : {
                    "name" : {
                        "type" : "string"
                    },
                    "cpf" : {
                        "type" : "string"
                    },
                    "email" : {
                        "type" : "string"
                    },
                    "biography" : {
                        "type" : "string"
                    },
                    "password" : {
                        "type" : "string"
                    }
                }
            },
            "Carro" : {
                "type" : "object",
                "properties" : {
                    "brand" : {
                        "type" : "string"
                    },
                    "model" : {
                        "type" : "string"
                    },
                    "chassis" : {
                        "type" : "string"
                    },
                    "year" : {
                        "type" : "string"
                    },
                    "km" : {
                        "type" : "string"
                    },
                    "color" : {
                        "type" : "string"
                    },
                    "buy_price" : {
                        "type" : "string"
                    }
                }
            },
            "Venda" : {
                "properties" : {
                    "user_id" : {
                        "type" : "string"
                    },
                    "car_chassis" : {
                        "type" : "string"
                    },
                    "sold" : {
                        "type" : "boolean"
                    },
                    "reserved" : {
                        "type" : "boolean"
                    },
                    "sell_price" : {
                        "type" : "string"
                    },
                    "client_cpf" : {
                        "type" : "string"
                    }
                }
            }
        },
        "securitySchemes" : {
            "bearerAuth" : {
                "type" : "http",
                "scheme" : "bearer",
                "bearerFormat" : "JWT"
            }
        }
    }
}